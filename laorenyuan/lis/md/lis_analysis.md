# LIS系统集成分析文档

## 1. 系统概述

LIS(Laboratory Information System)系统与CDSS系统对接，主要提供以下功能：

- 检验项目质控
- 检验结果解读

## 2. 功能模块

### 2.1 检验项目质控

#### 2.1.1 功能描述
对检验项目进行质量控制，包括检验标本签收、检验报告审核和查看检验报告等场景。

#### 2.1.2 API接口
- 接口名称：检验项目质控API
- Method：cdss-reminder-lis
- 请求方式：POST
- 接口地址：http://01cdss.baidu.com/cdss/standard/api/v2

#### 2.1.3 质控级别
- notice：提醒
- warning：警告
- error：错误

### 2.2 检验结果解读

#### 2.2.1 功能描述
对检验结果进行智能解读，为医生提供参考建议。

#### 2.2.2 API接口
- 接口名称：检验结果解读API
- Method：cdss-analysis-lis
- 请求方式：POST
- 接口地址：http://01cdss.baidu.com/cdss/standard/api/v2

## 3. 数据规范

### 3.1 工作人员信息

| 字段名 | 是否必填 | 说明 | 示例 |
|--------|----------|------|------|
| 医院 | 是 | 医院名称 | "XX医院" |
| 科室 | 是 | 科室名称 | "检验科" |
| 姓名 | 是 | 工作人员姓名 | "张三" |
| 账号ID | 是 | 医疗信息系统账号 | "zhangsan001" |
| 角色 | 否 | 人员角色 | "医生/护士/药师/等" |
| 职称 | 否 | 职称信息 | "主任医师" |

### 3.2 患者信息

| 字段名 | 是否必填 | 说明 | 示例 |
|--------|----------|------|------|
| 就诊类型 | 是 | 就诊类型 | "门诊/住院/急诊/体检" |
| 就诊次数 | 否 | 就诊次数 | "1" |
| 就诊ID | 是 | 就诊唯一标识 | "V20240101001" |
| 患者ID | 是 | 患者唯一标识 | "P20240101001" |
| 年龄 | 是 | 患者年龄 | "28岁" |
| 性别 | 是 | 患者性别 | "男/女" |
| 出生日期 | 否 | 出生日期 | "1996-01-01" |
| 职业 | 否 | 职业信息 | "教师" |
| 出生地 | 否 | 出生地 | "北京市" |
| 现住地 | 否 | 现住地 | "北京市海淀区" |
| 费用类型 | 否 | 费用类型 | "医保" |
| 身高 | 否 | 身高 | "180cm" |
| 体重 | 否 | 体重 | "70kg" |
| ABO血型 | 否 | ABO血型 | "A/B/AB/O" |
| Rh血型 | 否 | Rh血型 | "阴/阳" |
| 婚姻状态 | 否 | 婚姻状态 | "已婚" |

### 3.3 检验报告

| 字段名 | 是否必填 | 说明 | 示例 |
|--------|----------|------|------|
| 科室 | 否 | 检验科室 | "检验科" |
| 检验报告ID | 否 | 报告唯一标识 | "R20240101001" |
| 医嘱ID | 否 | 医嘱申请单ID | "O20240101001" |
| 标本类型 | 是 | 标本类型 | "血清" |
| 标本号 | 否 | 标本编号 | "S20240101001" |
| 申请时间 | 否 | 申请时间 | "2024-01-01 08:00:00" |
| 预约时间 | 否 | 预约时间 | "2024-01-01 09:00:00" |
| 采样时间 | 是 | 采样时间 | "2024-01-01 09:30:00" |
| 收样时间 | 否 | 收样时间 | "2024-01-01 10:00:00" |
| 检验时间 | 否 | 检验时间 | "2024-01-01 10:30:00" |
| 报告时间 | 否 | 报告时间 | "2024-01-01 11:00:00" |
| 检验项目 | 是 | 检验项目（大项） | "血常规" |

### 3.4 检验结果

| 字段名 | 是否必填 | 说明 | 示例 |
|--------|----------|------|------|
| 检验指标项 | 是 | 检验指标项目（小项） | "白细胞计数" |
| 检验指标缩写 | 否 | 指标缩写 | "WBC" |
| 结果 | 是 | 检验指标结果 | "12.5" |
| 单位 | 是 | 检验指标结果单位 | "10^9/L" |
| 结果提示 | 是 | 结果状态 | "偏高(↑)" |
| 最大值 | 是 | 检验指标最大值 | "10.0" |
| 最小值 | 是 | 检验指标最小值 | "4.0" |
| 正常值 | 是 | 检验指标正常值 | "4.0-10.0" |

## 4. 错误码说明

### 4.1 错误类别

| 错误码范围 | 错误类别 | 说明 |
|------------|----------|------|
| 0 | 正常 | 正常响应 |
| 1xxxx | 语法错误 | 请求URI错误、参数缺失、参数格式错误 |
| 2xxxx | 权限错误 | 鉴权失败、流量超过限制等 |
| 3xxxx | 网络错误 | 网络服务连接失败、请求超时等 |
| 4xxxx | 内部错误 | 内部异常、数据异常等 |

### 4.2 具体错误码

| 错误码 | 说明 | 处理建议 |
|--------|------|----------|
| 0 | 正常（返回结果可能为空） | 正常处理 |
| 10100 | method不存在 | 检查请求method是否正确 |
| 10200 | 请求参数异常 | 检查请求数据格式是否符合规范 |
| 20100 | license过期 | 联系CDSS商务人员续期 |
| 20200 | 权限异常 | 检查访问权限配置 |
| 20300 | 异常流量 | 控制请求频率 |
| 30100 | 服务连接异常 | 检查网络连接 |
| 30200 | 服务超时 | 减少单次数据量或重试 |
| 40100 | 服务数据异常 | 记录日志并联系技术支持 |
| 40200 | 代码抛异常 | 记录日志并联系技术支持 |
| 40300 | 未知异常 | 记录日志并联系技术支持 |
| 40400 | 初始化异常 | 检查系统配置 |
| 40500 | 配置异常 | 检查配置文件 |
| 40600 | 不支持的资源 | 检查请求资源是否正确 |

## 5. 注意事项

1. 异常处理
   - code不为0时表示接口异常，需要做好日志记录
   - 无需在系统中弹出错误信息，避免影响就诊流程
   - 设置请求超时时间（建议3秒）

2. 数据规范
   - 严格遵守患者数据规范
   - 必填字段必须提供
   - 日期时间格式：yyyy-MM-dd HH:mm:ss

3. 系统集成
   - 做好异常处理，保证医院就诊业务正常运行
   - 合理设置重试机制
   - 保证数据传输的安全性

4. 性能建议
   - 控制单次请求数据量
   - 合理设置缓存策略
   - 避免频繁请求